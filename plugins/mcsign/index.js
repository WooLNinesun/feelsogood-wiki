'use strict';

hexo.extend.tag.register('mcsign', function (args, content) {
  const signBase64 = 'data:image/png;base64,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';

  const style = `
    font-size: 24px;
    line-height: 30px;
    color: black;
    height: 140px;
    width: 280px;
    background: url('${signBase64}') repeat center top;
    white-space: nowrap;
    overflow: hidden;
    border: 2px solid #695433;
    text-align: center;
    padding: 5px 0 10px 0;
  `;


  content = content.replace(/^[\s\n]+|[\s\n]+$/g, '').replace(/\n/g, "<br/>");
  return `<div class="preview_zone" id="preview_zone" style="${style}">
            <span class="preview_sign">${content}</span>
          </div>`;
}, { ends: true, async: false });
